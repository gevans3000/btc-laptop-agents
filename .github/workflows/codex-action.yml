name: Codex Action (disabled)

on:
  workflow_dispatch:

env:
  CODEX_ACTION_ENABLED: "false"

jobs:
  codex-review:
    if: ${{ env.CODEX_ACTION_ENABLED == 'true' }}
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: "3.11"
      - run: python -m pip install --upgrade pip
      - run: pip install -e .[test]
      - run: pwsh ./scripts/codex_review.ps1
      - uses: actions/upload-artifact@v4
        with:
          name: codex-review
          path: .codex/review.md
